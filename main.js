(()=>{"use strict";function e(){return document.getElementById("task-entry").value}function t(){const e=document.getElementById("School"),t=document.getElementById("Personal");return e.checked?"School":t.checked?"Personal":void 0}function o(){const e=document.getElementById("date-entry"),t=[];let o=[],n="",r="",a="";for(let o=0;o<10;o++)t.push(e.value[o]);for(let e=5;e<7;e++)r+=t[e];for(let e=8;e<10;e++)a+=t[e];for(let e=0;e<4;e++)n+=t[e];return"undefinedundefinedundefinedundefined"==n||null==r||null==a?o=[]:o.push(parseInt(r),parseInt(a),parseInt(n)),o}function n(e){console.error(e)}function r(e,t,o){let n=[],r=["January","February","March","April","May","June","July","August","September","October","November","December"];for(let l=0;l<o+1;l++){const c={January:31,February:28,March:31,April:30,May:31,June:30,July:31,August:31,September:30,October:31,November:30,December:31};if((a=e[2]+l)%4!=0||a%100==0&&a%400!=0||(c.February=29),n.push(c),e[1]+l===e[1]){const t=e[l]-1;for(let o=0;o<t;o++){delete c[r[o]];let t=c[r[o+1]];t-=e[1],c[r[o+1]]=t}}if(l==o)if(12===t[0])c[r[11]]=t[1];else{r.reverse();for(let e=0;e<r.length-t[0];e++){delete c[r[e]];let o=c[r[e+1]];o=t[1],c[r[e+1]]=o}}}var a;return n}function a(e,t){let o=0,a={date:[(new Date).getMonth()+1,(new Date).getDate(),(new Date).getFullYear()]},l=[];l=t||function(e){return e[0]>12?n(`${e[0]} is not a valid month`):e[1]<(new Date).getDate()&&e[0]==(new Date).getMonth()+1?n("date is less than current date"):e[0]<(new Date).getMonth()+1&&e[2]==(new Date).getFullYear()?n(`${e[0]} is less than the current month`):e[2]<(new Date).getFullYear()?n(`${e[2]} is less than the current year`):{dueDate:e}}(e);const c=()=>(console.log(t,e,"pastDateArr || dueDate daysLeft.js line 14"),t.length>1?l[2]-a.date[2]:l.dueDate[2]-a.date[2]);let s=[];s=t?r(a.date[2],l[2],c()):r(a.date,l.dueDate,c());for(let t=0;t<s.length;t++){let n=["January","February","March","April","May","June","July","August","September","October","November","December"];for(let r=0;r<n.length;r++)void 0===s[t][n[r]]?o+=0:e[0]==(new Date).getMonth()+1&&e[2]==(new Date).getFullYear()?o=e[1]-(new Date).getDate():o+=s[t][n[r]]}return o}function l(e){return a(e)}function c(e){let t=a(e)/7,o=0;return t%1!=0&&(o=(t%1*7).toFixed(),t-=t%1),1==t&&0==o?t=`${t} week`:t>1&&0==o&&(t=`${t} weeks`),o>1&&(t>1||t<1)?t=`${t} weeks and ${o} days`:1==o&&(t>1||t<1)?t=`${t} weeks and ${o} day`:o>1&&1==t?t=`${t} week and ${o} days`:1==o&&1==t&&(t=`${t} week and ${o} day`),t}class s{constructor(e,t,o,n,r,a,l){this.title=e,this.note=t,this.dueDate=o,this.priority=n,this.type=r,this.daysLeft=a,this.category=l}}function d(){return e().length<1?(n("Task Name invalid"),!1):null==t()?(n("Category must be filled  out"),!1):null==o()[0]||null==o()[1]||null==o()[2]?(n("Must enter Date"),!1):e().length>1&&null!=o()[0]&&null!=o()[1]&&null!=o()[2]&&null!=t()?new s(e(),document.getElementById("note-entry").value,o(),function(){const e=document.getElementById("Urgent"),t=document.getElementById("Important"),o=document.getElementById("Not-Prioritized");return e.checked?"URGENT":t.checked?"Important":(o.checked,"Not Prioritized")}(),document.getElementById("type").value,c(o()),t()):void 0}function u(e,t){t.reset(),e.classList.remove("active"),overlay.classList.remove("active")}function i(e){if(null==e)return[];for(let t=0;t<e.length;t++){let o;if(o=null==e[t].dueDate?"":e[t].dueDate,-1==a(e[t].dueDate,o)){const o=e.indexOf(e[t]);let n=[],r=[];console.log(JSON.parse(localStorage.getItem("deleted-array")),"deleted array updateStorage.js line 17"),null!=JSON.parse(localStorage.getItem("deleted-array"))&&(r=JSON.parse(localStorage.getItem("deleted-array"))),1==e.length&&0==r.length?(n=JSON.parse(localStorage.getItem("storage-array")),r.push(e[o])):(null!=JSON.parse(localStorage.getItem("deleted-array"))&&r.push(e[o]),n=e.slice(o,1)),localStorage.setItem("deleted-array",JSON.stringify(r)),localStorage.setItem("storage-array",JSON.stringify(n))}}let t=[],o=[];const n=JSON.parse(localStorage.getItem("deleted-array"));if(null!=n)for(let e=0;e<n.length;e++)n[e].daysLeft=`${a(n[e].dueDate,n[e].dueDate)} days behind`,o.push(n[e]);for(let o=0;o<e.length;o++)e[o].daysLeft=c(e[o].dueDate),t.push(e[o]);return localStorage.setItem("deleted-array",JSON.stringify(o)),localStorage.setItem("storage-array",JSON.stringify(t))}function g(){const e=document.querySelector(".cards");if("Total Tasks: 0"==document.querySelector(".quote").textContent&&null==e.querySelector("img")){const t=["imgs/cat.png","imgs/cat1.png","imgs/cuteDog.png","imgs/dog-watermelon.png","imgs/dog1.png","imgs/dog2.png","imgs/dogYawn.png","imgs/hampster.png"],o=Math.floor(Math.random()*t.length),n=new Image;n.src=t[o],n.style.height="35%",n.style.width="35%",n.style.minHeight="300px",n.style.minWidth="300px",e.appendChild(n)}}function y(){const e=document.querySelector(".cards");return null==e.querySelector("div")?0:e.childElementCount}function m(e,t){const o=document.querySelector(".cards");if((null==localStorage.getItem("storage-array")||localStorage.getItem("storage-array").length<3)&&(null==localStorage.getItem("deleted-array")||localStorage.getItem("deleted-array").length<3))g();else{const n=function(e,t){const o=JSON.parse(localStorage.getItem("storage-array")),n=JSON.parse(localStorage.getItem("deleted-array"));function r(o,n,r){const a=document.createElement("div");a.style.backgroundColor="white",a.style.width="95%",a.style.margin="10px",a.style.borderRadius="15px",a.style.padding="10px","Not Prioritized"==n[o].priority?a.style.borderLeft="8px solid green":"Important"==n[o].priority?a.style.borderLeft="8px solid orange":"URGENT"==n[o].priority&&(a.style.borderLeft="8px solid red"),a.style.justifyContent="space-evenly",a.style.alignItems="center";let l=document.createElement("h4");l.textContent=n[o].title;let c=document.createElement("p");c.textContent=n[o].note;let s=document.createElement("p");s=`Due Date: ${n[o].dueDate} || ${n[o].daysLeft} left`,document.createElement("p").textContent=`Priority: ${n[o].priority}`;let d=document.createElement("p");d.textContent=`Type: ${n[o].type}`;let u=document.createElement("p");u.textContent=n[o].category,"Personal"==u.innerHTML?(u.style.backgroundColor="lightgreen",u.style.padding="5px",u.style.width="fit-content"):(u.style.backgroundColor="lightcoral",u.style.padding="5px",u.style.width="fit-content");const i=document.createElement("button");i.classList.add("delete-button"),i.innerHTML="Delete Task",a.append(l,c,s,d,u,i),document.querySelector(".cards").append(a),i.addEventListener("click",(()=>{const l=n.indexOf(n[o]);n.splice(l,1),a.remove(),localStorage.setItem(r,JSON.stringify(n)),document.querySelector(".cards").textContent="",m(e,t),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,g()}))}if(null!=o){const a=JSON.parse(localStorage.getItem("deleted-array"));if("Total"==e&&"Total"==t){for(let e=0;e<o.length;e++)r(e,o,"storage-array");return""}if("Today"==e&&"Total"==t){for(let e=0;e<o.length;e++)0!=o[e].daysLeft||r(e,o,"storage-array");return""}if("Weeks"==e&&"Total"==t){for(let e=0;e<o.length;e++)l(o[e].dueDate)>7||r(e,o,"storage-array");return""}if("Overdue"==e&&"Total"==t){for(let e=0;e<a.length;e++)r(e,n,"deleted-array");return""}if("Total"==e&&"Personal"==t){for(let e=0;e<o.length;e++)"Personal"!=o[e].category||r(e);return""}if("Today"==e&&"Personal"==t){for(let e=0;e<o.length;e++)"Personal"!=o[e].category||0!=o[e].daysLeft||r(e);return""}if("Weeks"==e&&"Personal"==t){for(let e=0;e<o.length;e++)"Personal"!=o[e].category||l(o[e].dueDate)>7||r(e);return""}if("Overdue"==e&&"Personal"==t){if(null!=a)for(let e=0;e<a.length;e++)r(e,n,"deleted-array");return""}if("Total"==e&&"School"==t){for(let e=0;e<o.length;e++)"School"!=o[e].category||r(e);return""}if("Today"==e&&"School"==t){for(let e=0;e<o.length;e++)"School"!=o[e].category||0!=o[e].daysLeft||r(e);return""}if("Weeks"==e&&"School"==t){for(let e=0;e<o.length;e++)"School"!=o[e].category||l(o[e].dueDate)>7||r(e);return""}if("Overdue"==e&&"School"==t){if(null!=a)for(let e=0;e<a.length;e++)r(e,n,"deleted-array");return""}}}(e,t);o.append(n)}}console.log(i(JSON.parse(localStorage.getItem("storage-array"))),"null"),i(JSON.parse(localStorage.getItem("storage-array"))),console.log(JSON.parse(localStorage.getItem("storage-array")),JSON.parse(localStorage.getItem("deleted-array")),"localStorages index.js line 16"),function e(){const t=document.querySelector(".clock");let o="",n=(new Date).getHours(),r=(new Date).getMinutes(),a=(new Date).getSeconds();return n>12&&(n-=12),a<10&&(a=`0${a}`),n<10&&(n=`0${n}`),r<10&&(r=`0${r}`),o=`${n}:${r}:${a}`,t.textContent=o,setTimeout(e,1e3),t}(),m("Total","Total"),document.getElementById("saveData").addEventListener("click",(()=>{!function(){const e=document.createElement("a"),t=new Blob([localStorage.getItem("storage-array")]);e.href=URL.createObjectURL(t),e.download="Storage.txt",e.click()}()}));const f=document.getElementById("new-task-button"),S=document.getElementById("close-button"),h=document.getElementById("task-modal"),p=document.getElementById("submit-task"),k=document.getElementById("modal"),I=document.getElementById("overlay");f.addEventListener("click",(()=>{!function(e){e.classList.add("active"),overlay.classList.add("active")}(k)})),I.addEventListener("click",(()=>{u(k,h)})),S.addEventListener("click",(()=>{u(k,h)}));let T="Total";const v=document.querySelector(".total-taskEL"),x=document.querySelector(".todays-taskEL"),D=document.querySelector(".weeks-taskEL"),E=document.querySelector(".overdue-taskEL"),C=document.querySelector(".page-location"),q=document.querySelector(".cards");document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,g();const L=document.querySelector(".home-icon"),$=document.querySelector(".personal-button"),b=document.querySelector(".school-button");let w="Total";L.addEventListener("click",(()=>{w="Total",q.textContent="",m(T,w),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,document.querySelector(".category-title").textContent="All Categories",g()})),$.addEventListener("click",(()=>{w="Personal",q.textContent="",m(T,w),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,document.querySelector(".category-title").textContent="Personal Category",g()})),b.addEventListener("click",(()=>{w="School",q.textContent="",m(T,w),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,document.querySelector(".category-title").textContent="School Category",g()})),v.addEventListener("click",(()=>{T="Total",C.textContent=`${T} Tasks`,q.textContent="",m(T,w),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,g()})),x.addEventListener("click",(()=>{T="Today",C.textContent=`${T}'s Tasks`,q.textContent="",m(T,w),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,g()})),D.addEventListener("click",(()=>{T="Weeks",C.textContent="Current Week",q.textContent="",m(T,w),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,g()})),E.addEventListener("click",(()=>{T="Overdue",C.textContent="OverDue Tasks",q.textContent="",m(T,w),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,g()})),p.addEventListener("click",(e=>{e.preventDefault(),d()?(g(),function(e){let t=[];null==e?n("Task not added to storage"):(null!=localStorage.getItem("storage-array")&&(t=JSON.parse(localStorage.getItem("storage-array"))),null!=e&&(t.push(e),localStorage.setItem("storage-array",JSON.stringify(t))))}(d()),i(JSON.parse(localStorage.getItem("storage-array"))),console.log(JSON.parse(localStorage.getItem("storage-array")),"main storeage index.js 143"),q.textContent="",m(T,w),document.querySelector(".quote").textContent=`Total Tasks: ${y()}`,u(k,h)):e.preventDefault()}))})();